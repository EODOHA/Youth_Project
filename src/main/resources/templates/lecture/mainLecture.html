<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout}">
	
	<script src="/js/main.js"></script>
<head>
<!-- 사용자 CSS 추가 -->
	<th:block layout:fragment="css">
		<style>
			.card-text {
				text-overflow: ellipsis;
				white-space: nowrap;
				overflow: hidden;
			}
			
			.margin {
				margin-bottom:30px;
			}
			
			a:hover {
				text-decoration:none;
			}
			
			.center {
				text-align:center;
			}
			
			.disabled {
				pointer-events: none;
				cursor: default;
			}
			
		</style>
	</th:block>
</head>
	<div layout:fragment="content">
		<input type="hidden" name="searchQuery" th:value="${lectureSearchDto.searchQuery}">
		<div th:if="${not #strings.isEmpty(lectureSearchDto.searchQuery)}" class="center">
			<p class="h3 font-weight-bold" th:text="${lectureSearchDto.searchQuery} + '검색 결과'"></p>
		</div>
		
		<div class="row">
			<th:block th:each="lecture, status: ${lectures.getContent()}">
				<div class="col-md-4 margin">
					<div class="card">
						<a th:href="'/lecture/' + ${lecture.id}" class="text-dark">
							<img th:src="${lecture.imgUrl}" class="card-img-top" th:alt="${lecture.lectureNm}" height="600">
							<div class="card-body">
								<h4 class="card-title">[[${lecture.lectureNm}]]</h4>
								<p class="card-text">[[${lecture.lectureDetail}]]</p>
								<h3 class="card-title text-primary">[[${lecture.price}]]원</h3>
							</div>
						</a>
					</div>
				</div>
			</th:block>
		</div>
		
		<div th:with="start=${(lectureNumber/maxPage)*maxPage + 1}, end=(${(lectureTotalPages == 0) ? 1 : (start + (maxPage - 1) < lectureTotalPages ? start + (maxPage - 1) : lectureTotalPages)})" >
			<ul class="pagination justify-content-center">
			
				<li class="page-lecture" th:classappend="${lectureNumber eq 0}?'disabled':''">
					<a th:href="@{'lectures' + '?searchQuery=' + ${lectureSearchDto.searchQuery} + '&page=' + ${lectureNumber-1}}" aria-label='Previous' class="page-link">
						<span aria-hidden='true'>Previous</span>
					</a>
				</li>
				
				<li class="page-lecture" th:each="page: ${#numbers.sequence(start, end)}" th:classappend="${lectureNumber eq page-1}?'active':''">
					<a th:href="@{'lectures' + '?searchQuery=' + ${lectureSearchDto.searchQuery} + '&page=' + ${page-1}}" th:inline="text" class="page-link">[[${page}]]</a>
				</li>
								
				<li class="page-lecture" th:classappend="${lectureNumber+1 ge lectureTotalPages}?'disabled':''">
					<a th:href="@{'lectures' + '?searchQuery=' + ${lectureSearchDto.searchQuery} + '&page=' + ${lectureNumber+1}}" aria-label='Next' class="page-link">
						<span aria-hidden='true'>Next</span>
					</a>
				</li>
				
			</ul>
		</div>
	</div>
</html>